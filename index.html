<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Nested Iframes via fetch()</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  iframe {
    border: 1px solid #333;
  }
</style>
</head>
<body>

<h2>Nested iframes with Button in innermost iframe (content loaded via fetch)</h2>

<iframe id="outer-iframe" width="420" height="220"></iframe>

<script>
  async function loadIframeContent() {
    const outerIframe = document.getElementById('outer-iframe');
    const outerDoc = outerIframe.contentDocument || outerIframe.contentWindow.document;

    // Fetch outer iframe content
    const outerResp = await fetch('outer.html');
    const outerHtml = await outerResp.text();

    outerDoc.open();
    outerDoc.write(outerHtml);
    outerDoc.close();

    // Wait a bit for outer iframe DOM to be ready
    await new Promise(r => setTimeout(r, 50));

    const innerIframe = outerDoc.getElementById('inner-iframe');
    const innerDoc = innerIframe.contentDocument || innerIframe.contentWindow.document;

    // Fetch inner iframe content
    const innerResp = await fetch('inner.html');
    const innerHtml = await innerResp.text();

    innerDoc.open();
    innerDoc.write(innerHtml);
    innerDoc.close();
  }

  loadIframeContent();
</script>

</body>
</html>
